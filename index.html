<html>
  <head>
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <!-- STL Loader for A-Frame -->
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.loaders.min.js"></script>
    <!-- MindAR for A-Frame -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.4/dist/mindar-image-aframe.prod.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mind-ar@1.2.4/dist/mindar-image-aframe.prod.css" />
  </head>
  <body style="margin : 0; overflow: hidden;">
    <div id="ar-status" style="position:fixed;bottom:10px;left:10px;right:10px;z-index:10;background:rgba(255,255,255,0.95);padding:15px;border-radius:10px;display:none;text-align:center;">
      <span id="ar-message"></span>
      <br>

      <button onclick="scaleAnimation(0.8)" style="margin:3px;padding:6px 10px;border:none;border-radius:4px;background:#f0f0f0;">Small</button>
      <button onclick="scaleAnimation(1.0)" style="margin:3px;padding:6px 10px;border:none;border-radius:4px;background:#f0f0f0;">Medium</button>
      <button onclick="scaleAnimation(1.25)" style="margin:3px;padding:6px 10px;border:none;border-radius:4px;background:#f0f0f0;">Large</button>
      <button onclick="scaleAnimation(1.50)" style="margin:3px;padding:6px 10px;border:none;border-radius:4px;background:#f0f0f0;">Extra Large</button>
    </div>

    <a-scene mindar-image="imageTargetSrc: targets.mind; autoStart: true;"
           color-space="sRGB"
           renderer="colorManagement: true, physicallyCorrectLights"
           vr-mode-ui="enabled: false"
           device-orientation-permission-ui="enabled: true">
      <a-assets>
        <!-- Local baby video animation - optimized for smooth playback -->
        <video id="baby-video"
               src="baby.mp4"
               autoplay
               loop
               muted
               playsinline
               preload="auto"
               crossorigin="anonymous"
               style="object-fit: cover;"></video>
        <img id="target-image" src="bayko.jpeg" />
      </a-assets>
      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
      <a-entity mindar-image-target="targetIndex: 0">
        <!-- Video animation plane - your baby.mp4 file (upright, stable, extra large) -->
        <a-plane id="baby-animation-plane"
                 src="#baby-video"
                 position="0 -0.3 0"
                 width="1.0"
                 height="1.0"
                 rotation="-15 0 0"
                 material="transparent: true; shader: flat"></a-plane>
      </a-entity>
    </a-scene>
    <script>
      // Simple status message
      const statusDiv = document.getElementById('ar-status');
      const messageSpan = document.getElementById('ar-message');
      statusDiv.style.display = 'block';
      messageSpan.textContent = 'Point your camera at the target image...';

      // Listen for camera events
      window.addEventListener('camera-init', () => {
        messageSpan.textContent = 'Camera ready! Point at the target image.';
        setTimeout(() => statusDiv.style.display = 'none', 5000);
      });
      window.addEventListener('camera-error', () => {
        messageSpan.textContent = 'Camera access denied. Please allow camera access.';
      });

      // Listen for AR target found/lost events
      document.querySelector('[mindar-image-target]').addEventListener('targetFound', () => {
        console.log('üéØ Target found! Model should be visible now.');
        messageSpan.textContent = 'üéØ Target found!';
        statusDiv.style.display = 'block';
      });

      document.querySelector('[mindar-image-target]').addEventListener('targetLost', () => {
        console.log('‚ùå Target lost. Point camera back at the image.');
        messageSpan.textContent = '‚ùå Target lost. Point camera at the image again.';
        statusDiv.style.display = 'block';
      });

      // Function to adjust animation scale
      function scaleAnimation(newScale) {
        const animationPlane = document.querySelector('#baby-animation-plane');
        if (animationPlane) {
          animationPlane.setAttribute('width', newScale);
          animationPlane.setAttribute('height', newScale);
          messageSpan.textContent = `Animation scaled to ${newScale}. Point camera at target.`;
        }
      }

      // Function to adjust animation position
      function positionAnimation(x, y, z) {
        const animationPlane = document.querySelector('#baby-animation-plane');
        if (animationPlane) {
          animationPlane.setAttribute('position', `${x} ${y} ${z}`);
          messageSpan.textContent = `Animation positioned at Y: ${y}. Point camera at target.`;
        }
      }

      // Function to adjust tilt angle
      function adjustTilt(angle) {
        const animationPlane = document.querySelector('#baby-animation-plane');
        if (animationPlane) {
          animationPlane.setAttribute('rotation', `${angle} 0 0`);
          messageSpan.textContent = `Tilt adjusted to ${angle} degrees. Point camera at target.`;
        }
      }





      // Enhanced video loading and smooth playback
      document.addEventListener('DOMContentLoaded', () => {
        const babyVideo = document.querySelector('#baby-video');

        if (babyVideo) {
          // Ensure smooth looping
          babyVideo.addEventListener('loadeddata', () => {
            console.log('‚úÖ video loaded successfully');
            messageSpan.textContent = 'Video animation loaded! Point camera at target.';

            // Set video properties for smooth playback
            babyVideo.currentTime = 0;
            babyVideo.playbackRate = 1.0;
          });

          babyVideo.addEventListener('error', (event) => {
            console.log('‚ùå Video failed to load:', event);
            messageSpan.textContent = 'Video failed to load.';
          });

          babyVideo.addEventListener('canplay', () => {
            console.log('‚úÖ Video ready to play');
            babyVideo.play().catch(e => console.log('Video autoplay prevented:', e));
          });

          // Ensure seamless looping
          babyVideo.addEventListener('ended', () => {
            babyVideo.currentTime = 0;
            babyVideo.play();
          });

          // Handle any playback interruptions
          babyVideo.addEventListener('pause', () => {
            if (!babyVideo.ended) {
              babyVideo.play().catch(e => console.log('Resume play failed:', e));
            }
          });
        }
      });

      // Auto-check when page loads
      setTimeout(() => {
        const model = document.querySelector('[mindar-image-target] a-group');
        console.log('üîç Checking for model on page load:', model);
        if (model) {
          console.log('‚úÖ Model exists with children:', model.children.length);
        }
      }, 2000);
    </script>
    <script>
(function() {
  var logDiv = document.getElementById('console-log');
  logDiv.style.display = 'block';
  function printLog(type, args) {
    var msg = Array.from(args).map(a => (typeof a === 'object' ? JSON.stringify(a) : a)).join(' ');
    logDiv.innerHTML += `<div>[${type}] ${msg}</div>`;
    logDiv.scrollTop = logDiv.scrollHeight;
  }
  ['log', 'warn', 'error'].forEach(function(type) {
    var orig = console[type];
    console[type] = function() {
      orig.apply(console, arguments);
      printLog(type, arguments);
    };
  });
})();
</script>
  </body>
</html><!-- Force update Fri Jul 11 21:27:15 PDT 2025 -->
<!-- FORCE UPDATE Fri Jul 11 21:36:43 PDT 2025 -->
<!-- AVOCADO UPDATE Fri Jul 11 21:39:40 PDT 2025 -->
<!-- AVOCADO BRANCH UPDATE Fri Jul 11 22:19:41 PDT 2025 -->
